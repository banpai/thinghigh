var left=new Vue({el:"#left",data:{percent:0,level:[]},methods:{add:function(){return this.percent>=100?!1:void(this.percent+=10)},minus:function(){return this.percent<=0?!1:void(this.percent-=10)}}}),right=new Vue({el:"#right",data:{buttons:[]},methods:{cgmk:function(e){app.model=e}}}),app=new Vue({el:"#app",data:{codecontent:"#没有代码",tasksearch:"",visible:!1,jilian:!1,write_val:"1",write_name:"",write:"",model:"task",codesearch:"",taskli:[{date:"2016-12-14",lidata:[]}],codename:[{value:"javascript",label:"javascript"},{value:"php",label:"php",children:[{value:"1",code:"1",label:"存单表数据"}]}]},filters:{marked:marked},methods:{update:function(e){this.input=e.target.value},change:function(e){this.jilian=e,this.codesearch=""},show:function(){this.visible=!0},format:function(e,t){const a=e.length-1,n=t[a]||!1;return n&&n.code?(console.log("x"),this.codesearch!==n.code&&portsfun.getcode(n.value,"2"),this.codesearch=n.code,e[a]):void 0},code_chang:function(){alert("xxx")},code_delete:function(){alert("shchu")},write_sub:function(){if(this.write_name)if(this.write){var e=this;this.$Modal.confirm({title:"确定要提交到代码库吗？",loading:!0,content:"提交的代码片段可以在代码库模块中查询……",onOk:function(){portsfun.putcode({write:e.write,write_val:e.write_val,write_name:e.write_name,callback:function(){e.$Modal.remove(),e.write="",e.write_val="",e.write_name="",portsfun.getcodename()}})}})}else this.$Message.error("请填写内容");else this.$Message.error("请填写名称")}}});document.onkeydown=function(e){var t=e||window.event||arguments.callee.caller.arguments[0];if(t&&13==t.keyCode&&"task"===app.model){console.log(app.tasksearch);var a={name:app.tasksearch};app.taskli[0].lidata.push(a),app.tasksearch=""}};var portsfun=function(){var e=function(e){ajax("index-putcode.html",{type:e.write_val,content:e.write,title:e.write_name},function(t){var a=JSON.stringify(t);console.log(a),"0"===t.errcode?e.callback():this.$Message.error(t.errmsg)})},t=function(){ajax("index-codename.html",{},function(e){app.codename=e.data;var t=JSON.stringify(e);console.log(t)})},a=function(){ajax("/js/data/buttons.json",{},function(e){right.buttons=e.data})},n=function(){ajax("index-level.html",{},function(e){left.level=e.data;var t=JSON.stringify(e);console.log(t)})},o=function(e,t){ajax("index-code.html",{id:e,flag:t},function(e){app.codecontent=e.data[0].content;var t=JSON.stringify(e.data[0].content);console.log(t)})};return{getbuttonsdata:a,getleveldata:n,getcode:o,getcodename:t,putcode:e}}();$(function(){portsfun.getbuttonsdata(),portsfun.getleveldata(),portsfun.getcodename()});